import{a as L}from"./chunk-CE2NV3PE.js";import{a as j,b as M}from"./chunk-HHOM7CRW.js";import"./chunk-ULV6KZCQ.js";import{a as O}from"./chunk-K6AQFHQZ.js";import"./chunk-UNETXBBP.js";import{g as T}from"./chunk-VAS7ZGTW.js";import{g as V}from"./chunk-BS6GGXZ2.js";import"./chunk-AT2Y7737.js";import{A as d,C as n,D as p,E as c,I as g,K as C,L as m,R as P,S as _,U as S,Y as x,b as h,g as v,i as a,ia as I,j as y,ja as w,ka as b,p as f,pa as R,q as u,ra as F,x as l,y as A}from"./chunk-R7YALVTQ.js";import{a as B,k as E}from"./chunk-6ZVQRB5I.js";import"./chunk-LGOCNUIX.js";var k=(()=>{let e=class e extends V{constructor(){super([]),this.articleId="",this.articleMapper=a(T),this.proposedArticleService=a(j),this.router=a(F),this.articleCardService=a(M),this.category=""}get isCompleted(){return super.isCompleted()&&this.articleCardService.setArticlesCards(this.result()),super.isCompleted}get totalArticlesCards(){return this.articleCardService.totalArticlesCards}get categories(){return this.articleCardService.categories}get articlesCards(){return this.articleCardService.filterByCategory(this.category)}proposedArticles(t){let i=this.proposedArticleService.getProposerArticlesByReceiverArticleId(t).pipe(h(s=>s.map(D=>this.articleMapper.toArticleCard(D))));this.execute(i)}filterByCategory(t){this.category=t}deleteProposed(t){this.proposedArticleService.deleteById(t).subscribe(()=>{this.proposedArticleService.getProposerArticlesByReceiverArticleId(this.articleId).subscribe(i=>{i.length===0?this.router.navigate([`${B.Profile}`]).then():this.proposedArticles(this.articleId)})})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function $(r,e){r&1&&(p(0,"span",1),_(1,"Cargando..."),c())}function q(r,e){if(r&1){let o=g();p(0,"app-proposed-article-card",6),C("deleteProposed",function(i){f(o);let s=m(2);return u(s.onDeletedProposed(i))}),c()}if(r&2){let o=e.$implicit;n("articleCard",o)}}function H(r,e){if(r&1){let o=g();p(0,"app-select",2),C("selectedOption",function(i){f(o);let s=m();return u(s.onSelectedCategory(i))}),c(),p(1,"span",3),_(2),c(),p(3,"div",4),d(4,q,1,1,"app-proposed-article-card",5),c()}if(r&2){let o=m();n("options",o.service.categories),l(2),S("",o.service.totalArticlesCards," resultados "),l(2),n("ngForOf",o.service.articlesCards)}}var fe=(()=>{let e=class e{constructor(t){this.activatedRoute=t,this.getLayout=E,this.service=a(k),this.service.articleId=this.activatedRoute.snapshot.params.articleId,this.service.proposedArticles(this.activatedRoute.snapshot.params.articleId)}onSelectedCategory(t){this.service.filterByCategory(t)}onDeletedProposed(t){this.service.deleteProposed(t)}};e.\u0275fac=function(i){return new(i||e)(A(R))},e.\u0275cmp=y({type:e,selectors:[["ng-component"]],standalone:!0,features:[x],decls:3,vars:5,consts:[[3,"ngIf"],[1,"o-text-lg-bold"],[3,"options","selectedOption"],[1,"o-text-lg-semibold","o-layout-width-100"],[1,"o-layout-article-cards"],[3,"articleCard","deleteProposed",4,"ngFor","ngForOf"],[3,"articleCard","deleteProposed"]],template:function(i,s){i&1&&(p(0,"div"),d(1,$,2,0,"ng-template",0),d(2,H,5,3,"ng-template",0),c()),i&2&&(P(s.getLayout()),l(1),n("ngIf",s.service.isWorking()),l(1),n("ngIf",s.service.isCompleted()))},dependencies:[b,I,w,O,L],encapsulation:2});let r=e;return r})();export{fe as ProposedArticlesPageComponent};
