import{a as G}from"./chunk-TM75FGBG.js";import{a as q}from"./chunk-DVOM4FA5.js";import{a as H}from"./chunk-ONVS2USS.js";import{g as U,h as N,j as z}from"./chunk-VAS7ZGTW.js";import{g as W}from"./chunk-BS6GGXZ2.js";import{a as $,b as j,c as O}from"./chunk-AT2Y7737.js";import{A as l,C as a,D as o,E as c,F as u,I as A,K as v,L as d,O as P,S as s,T as x,U as T,Y as E,b as I,g as b,i as m,j as C,ja as B,ka as w,p as _,pa as R,q as h,ra as D,s as S,ua as M,x as r,xa as k,y,ya as F,za as V}from"./chunk-R7YALVTQ.js";import{a as f}from"./chunk-6ZVQRB5I.js";import"./chunk-LGOCNUIX.js";var J=(()=>{let i=class i extends W{constructor(){super({}),this.userMapper=m(j),this.authService=m(M),this.articleService=m(H),this.articleMapper=m(U)}get date(){return z.toRelativeTime(this.article.date)}get hasProposedOrReceivedArticle(){return this.hasProposedArticle||this.hasReceivedProposal}get hasReceivedProposal(){return this.articleContainsProperty("receiverUserIdForArticle")?this.article.receiverUserIdForArticle===this.authService.user.id:!1}get hasProposedArticle(){return this.articleContainsProperty("proposersUserIdsForArticle")?this.article.proposersUserIdsForArticle.includes(this.authService.user.id):!1}get user(){return this.article.user}get headerDetail(){return this.userMapper.toHeaderDetails(this.user)}get article(){return this.result()}get isMyArticle(){return this.authService.containsId(this.article.user.id)}getById(n){let p=this.articleService.getById(n).pipe(I(g=>this.articleMapper.mapTypesToCamelCase(g)));this.execute(p)}articleContainsProperty(n){return this.article.hasOwnProperty(n)}};i.\u0275fac=function(p){return new(p||i)},i.\u0275prov=b({token:i,factory:i.\u0275fac,providedIn:"root"});let t=i;return t})();function L(t,i){t&1&&(o(0,"span",3),s(1,"Cargando..."),c())}function Q(t,i){if(t&1){let e=A();o(0,"div",21)(1,"app-button",22),v("click",function(){_(e);let p=d(2);return h(p.onAcceptProposedArticle())}),c(),o(2,"app-button",23),v("click",function(){_(e);let p=d(2);return h(p.onContactWhatsApp())}),c()()}if(t&2){let e=d(2);r(1),a("description","Aceptar intercambio")("icon",e.Icon.Exchanges)("typeButton",e.TypeButton.Primary),r(1),a("description","Contactar por WhatsApp")("typeButton",e.TypeButton.Contact)}}function X(t,i){if(t&1){let e=A();o(0,"div",21)(1,"app-button",22),v("click",function(){_(e);let p=d(2);return h(p.onSuggestArticle())}),c()()}if(t&2){let e=d(2);r(1),a("description","Proponer art\xEDculo")("icon",e.Icon.Hand)("typeButton",e.TypeButton.Primary)}}function Y(t,i){t&1&&(o(0,"span",24),s(1,"Te han propuesto este art\xEDculo"),c())}function Z(t,i){t&1&&(o(0,"span",24),s(1,"No puedes aceptar este intercambio porque tienes uno pendiente..."),c())}function ee(t,i){t&1&&(o(0,"span",24),s(1,"Has realizado una propuesta para este art\xEDculo"),c())}function te(t,i){if(t&1&&(l(0,Y,2,0,"ng-template",1),l(1,Z,2,0,"ng-template",1),l(2,ee,2,0,"ng-template",1)),t&2){let e=d(2);a("ngIf",e.service.hasReceivedProposal),r(1),a("ngIf",!e.service.hasProposedArticle&&!e.service.article.isAcceptableForExchange),r(1),a("ngIf",e.service.hasProposedArticle)}}function ie(t,i){if(t&1&&(o(0,"div",4)(1,"div",5),u(2,"img",6),o(3,"div",7)(4,"span",8),s(5),c(),o(6,"span",9),s(7),c(),o(8,"span",10),s(9),c()(),o(10,"div",11),u(11,"app-button",12)(12,"app-button",13),c()(),o(13,"div",14)(14,"span",15),s(15,"Publicador"),c(),o(16,"div",16),u(17,"app-header-detail",17),o(18,"span",18),s(19),c(),o(20,"div",19),u(21,"app-button",12)(22,"app-button",12),c()(),o(23,"span",15),s(24,"Galer\xEDa"),c(),u(25,"app-gallery",20),l(26,Q,3,5,"ng-template",1),l(27,X,2,3,"ng-template",1),l(28,te,3,3,"ng-template",1),c()()),t&2){let e=d();r(2),P("src",e.service.article.images[0],S),r(3),x(e.service.article.title),r(2),x(e.service.article.description),r(2),x(e.service.date),r(2),a("description",e.service.article.state)("icon",e.Icon.State)("typeButton",e.TypeButton.Tag),r(1),a("description",e.numberProposals(e.service.article.numbersProposals))("typeButton",e.TypeButton.Tag),r(5),a("headerDetail",e.service.headerDetail),r(2),T(" ",e.service.article.user.about,""),r(2),a("description",e.service.user.rating.toString())("icon",e.Icon.Star)("typeButton",e.TypeButton.Tag),r(1),a("description",e.numbersOfExchanges(e.service.user.numberExchanges))("icon",e.Icon.Exchanges)("typeButton",e.TypeButton.Tag),r(3),a("images",e.service.article.images),r(1),a("ngIf",e.showButtonsToExchangeArticle),r(1),a("ngIf",e.acceptProposals),r(1),a("ngIf",e.showMessagesProposedOrReceived)}}var Ee=(()=>{let i=class i{constructor(n,p){this.activatedRoute=n,this.router=p,this.TypeButton=F,this.Icon=k,this.typeArticle=N.Normal,this.service=m(J),this.exchangeService=m(q),this.articleId=this.activatedRoute.snapshot.params.id,this.service.getById(this.articleId)}get acceptProposals(){return!this.service.isMyArticle&&!this.service.hasProposedOrReceivedArticle}get showMessagesProposedOrReceived(){return!this.service.isMyArticle&&!this.showButtonsToExchangeArticle&&this.service.hasProposedOrReceivedArticle}get showButtonsToExchangeArticle(){return history.state.isExchangeArticle&&this.service.article.isAcceptableForExchange}numberProposals(n){return n>1?`${n} propuestas`:`${n} propuesta`}numbersOfExchanges(n){return n>1?`${n} intercambios`:`${n} intercambio`}onContactWhatsApp(){console.log("Contactar por WhatsApp")}onAcceptProposedArticle(){let n={receiverArticleId:history.state.articleId,proposerArticleId:this.articleId};this.exchangeService.accept(n).subscribe(()=>{this.router.navigate([f.Exchanges]).then()})}onSuggestArticle(){this.router.navigate([`${f.Article}/${this.articleId}/${f.Suggest}`]).then()}};i.\u0275fac=function(p){return new(p||i)(y(R),y(D))},i.\u0275cmp=C({type:i,selectors:[["ng-component"]],standalone:!0,features:[E],decls:3,vars:3,consts:[[3,"title"],[3,"ngIf"],["class","c-article-page",4,"ngIf"],[1,"o-text-2xl-bold"],[1,"c-article-page"],[1,"c-article-page__banner"],[1,"c-article-page__banner-image",3,"src"],[1,"c-article-page__banner-container"],[1,"c-article-page__banner-title","o-text-xl-semibold"],[1,"c-article-page__banner-description","o-text-normal-medium"],[1,"c-article-page__banner-date-published","o-text-sm-light"],[1,"c-article-page__banner-buttons"],[3,"description","icon","typeButton"],[3,"description","typeButton"],[1,"c-article-page__content"],[1,"o-text-xl-semibold"],[1,"c-article-page__user-card"],[3,"headerDetail"],[1,"o-text-base-normal"],[1,"c-article-page__user-card-buttons"],[3,"images"],[1,"c-article-page__buttons"],[3,"description","icon","typeButton","click"],[3,"description","typeButton","click"],[1,"o-text-sm-bold"]],template:function(p,g){p&1&&(u(0,"app-header",0),l(1,L,2,0,"ng-template",1),l(2,ie,29,21,"div",2)),p&2&&(a("title","Art\xEDculo"),r(1),a("ngIf",g.service.isWorking()),r(1),a("ngIf",g.service.isCompleted()))},dependencies:[O,w,B,V,G,$],encapsulation:2});let t=i;return t})();export{Ee as ArticlePageComponent};
