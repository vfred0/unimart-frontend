import{a as Y}from"./chunk-CE2NV3PE.js";import{a as X}from"./chunk-U737FJNI.js";import"./chunk-HHOM7CRW.js";import{a as w}from"./chunk-ULV6KZCQ.js";import{a as z}from"./chunk-K6AQFHQZ.js";import{a as Q}from"./chunk-XGG2NXRS.js";import"./chunk-UNETXBBP.js";import"./chunk-ONVS2USS.js";import{c as G,j as K}from"./chunk-VAS7ZGTW.js";import{c as E,g as J}from"./chunk-BS6GGXZ2.js";import{a as q}from"./chunk-AT2Y7737.js";import{$ as H,A as s,C as n,D as c,E as p,F as u,I as x,K as d,L as _,R as k,S as g,T as $,U as V,Y as C,g as F,i as f,ia as N,j as h,ja as j,ka as v,la as L,p as R,q as T,ra as M,ua as W,x as l,xa as A,y as D,ya as S,z as O,za as y}from"./chunk-R7YALVTQ.js";import{a as I,k as U}from"./chunk-6ZVQRB5I.js";import"./chunk-LGOCNUIX.js";var P=function(e){return e.High="Mayor",e.Low="Menor",e}(P||{});var Z=(()=>{let t=class t{constructor(){this.TypeButton=S,this.Icon=A,this.viewRatingCard={},this.headerDetail={}}ngOnInit(){this.headerDetail={photo:this.viewRatingCard.userPhoto,title:this.viewRatingCard.userName,description:K.toRelativeTime(this.viewRatingCard.date)}}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=h({type:t,selectors:[["app-view-rating-card"]],inputs:{viewRatingCard:"viewRatingCard"},standalone:!0,features:[C],decls:6,vars:6,consts:[[1,"c-view-rating-card"],[1,"c-view-rating-card__header-rating"],[3,"headerDetail","withDescription"],[3,"description","icon","typeButton"],[1,"o-text-base-normal"]],template:function(a,i){a&1&&(c(0,"div",0)(1,"div",1),u(2,"app-header-detail",2)(3,"app-button",3),p(),c(4,"span",4),g(5),p()()),a&2&&(l(2),n("headerDetail",i.headerDetail)("withDescription",!0),l(1),n("description",i.viewRatingCard.score.toString())("icon",i.Icon.Star)("typeButton",i.TypeButton.Secondary),l(2),$(i.viewRatingCard.comment))},dependencies:[v,y,q],encapsulation:2});let e=t;return e})();var ee=(()=>{let t=class t extends w{constructor(r){super(r),this.router=r,this.deleteArticle=new H}onShowProposals(){this.articleCard.numbersProposals>0&&this.router.navigate([`${I.ProfileProposedArticles}/${this.articleCard.id}`]).then()}onEditArticle(){this.router.navigate([`${I.EditArticle}/${this.articleCard.id}`]).then()}onDeleteArticle(){this.deleteArticle.emit(this.articleCard.id)}};t.\u0275fac=function(a){return new(a||t)(D(M))},t.\u0275cmp=h({type:t,selectors:[["app-published-article-card"]],outputs:{deleteArticle:"deleteArticle"},standalone:!0,features:[O,C],decls:6,vars:10,consts:[[3,"articleCard","typeArticleCard"],[1,"c-article-card__buttons"],[1,"c-article-card__button",3,"description","typeButton","click"],[1,"c-article-card__buttons-row"],[1,"c-article-card__button",3,"description","icon","typeButton","click"]],template:function(a,i){a&1&&(c(0,"app-article-card",0)(1,"div",1)(2,"app-button",2),d("click",function(){return i.onShowProposals()}),p(),c(3,"div",3)(4,"app-button",4),d("click",function(){return i.onEditArticle()}),p(),c(5,"app-button",4),d("click",function(){return i.onDeleteArticle()}),p()()()()),a&2&&(n("articleCard",i.articleCard)("typeArticleCard",i.TypeArticleCard.Proposed),l(2),n("description",i.getProposalsQuantity())("typeButton",i.TypeButton.Primary),l(2),n("description","Editar")("icon",i.Icon.Edit)("typeButton",i.TypeButton.Secondary),l(1),n("description","Eliminar")("icon",i.Icon.Delete)("typeButton",i.TypeButton.Secondary))},dependencies:[v,y,w],encapsulation:2});let e=t;return e})();var te=(()=>{let t=class t extends J{constructor(){super([]),this.API_URL="http://localhost:8080/api/v1/ratings",this.http=f(L),this.authService=f(W),this._filterByRating=P.High}get averageRating(){let r=this.authService.user;return Object.keys(r).length!==0?r.rating:0}get ratings(){let r=this.result();return this._filterByRating===P.High?r.sort((a,i)=>i.score-a.score):r.sort((a,i)=>a.score-i.score)}allRatings(){this.execute(this.getByUserId(this.authService.userId))}filterByRating(r){this._filterByRating=r}getByUserId(r){return this.http.get(`${this.API_URL}/users/${r}`)}};t.\u0275fac=function(a){return new(a||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function ie(e,t){e&1&&(c(0,"span",15),g(1,"Cargando..."),p())}function re(e,t){if(e&1){let o=x();c(0,"app-published-article-card",17),d("deleteArticle",function(){let i=R(o).$implicit,m=_(3);return T(m.onDeleteArticle(i.id))}),p()}if(e&2){let o=t.$implicit;n("articleCard",o)}}function ne(e,t){if(e&1&&s(0,re,1,1,"app-published-article-card",16),e&2){let o=_(2);n("ngForOf",o.service.articlesCards)}}function oe(e,t){if(e&1){let o=x();c(0,"app-proposed-article-card",19),d("deleteProposed",function(){let i=R(o).$implicit,m=_(3);return T(m.onDeleteProposed(i.id))}),p()}if(e&2){let o=t.$implicit;n("articleCard",o)("isExchangeArticle",!1)("showReceiverArticle",!0)}}function ae(e,t){if(e&1&&s(0,oe,1,3,"app-proposed-article-card",18),e&2){let o=_(2);n("ngForOf",o.service.articlesCards)}}function pe(e,t){if(e&1&&u(0,"app-article-card",21),e&2){let o=t.$implicit;n("articleCard",o)("showNumberProposals",!1)}}function le(e,t){if(e&1&&s(0,pe,1,2,"app-article-card",20),e&2){let o=_(2);n("ngForOf",o.service.articlesCards)}}function ce(e,t){if(e&1&&(s(0,ne,1,1,"ng-template",7),s(1,ae,1,1,"ng-template",7),s(2,le,1,1,"ng-template",7)),e&2){let o=_();n("ngIf",o.service.isPublished),l(1),n("ngIf",o.service.isProposed),l(1),n("ngIf",o.service.isExchanged)}}function se(e,t){e&1&&(c(0,"span",22),g(1," Cargando..."),p())}function de(e,t){if(e&1&&u(0,"app-button",23),e&2){let o=_();n("description",o.serviceRating.averageRating.toString())("icon",o.Icon.Star)("typeButton",o.TypeButton.Secondary)}}function me(e,t){if(e&1&&u(0,"app-view-rating-card",26),e&2){let o=t.$implicit;n("viewRatingCard",o)}}function _e(e,t){if(e&1&&(c(0,"div",24),s(1,me,1,1,"app-view-rating-card",25),p()),e&2){let o=_();l(1),n("ngForOf",o.serviceRating.ratings)}}var pt=(()=>{let t=class t{constructor(){this.TypeButton=S,this.Icon=A,this.getLayout=U,this.typeArticles=E(G),this.filterRatings=E(P),this.viewRatingCards=new Array,this.service=f(X),this.serviceRating=f(te),this.service.allArticles(),this.serviceRating.allRatings()}onTextSearchChanged(r){this.service.filterByTitle(r)}onSelectedTypeArticle(r){this.service.filterByTypeArticle(r)}onSelectedRating(r){this.serviceRating.filterByRating(r)}onDeleteArticle(r){this.service.deleteArticle(r)}onDeleteProposed(r){this.service.deleteProposedArticleById(r)}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=h({type:t,selectors:[["ng-component"]],standalone:!0,features:[C],decls:24,vars:15,consts:[[1,"c-tabs"],["checked","","id","tab1","name","tabs","type","radio",1,"c-tabs__radio"],["for","tab1",1,"c-tabs__label"],[1,"c-tabs__wrapper-content"],[1,"c-tabs__content"],[1,"o-layout-width-100",3,"icon","placeholder","textChanged"],[1,"o-layout-width-100",3,"options","label","selectedOption"],[3,"ngIf"],[1,"o-layout-article-cards"],["id","tab2","name","tabs","type","radio",1,"c-tabs__radio"],["for","tab2",1,"c-tabs__label"],[1,"o-layout-width-100",3,"label","options","selectedOption"],[1,"c-tabs__content-row","o-layout-width-100"],[1,"o-text-lg-semibold","o-layout-width-100"],[3,"description","icon","typeButton",4,"ngIf"],[1,"o-text-2xl-bold"],[3,"articleCard","deleteArticle",4,"ngFor","ngForOf"],[3,"articleCard","deleteArticle"],[3,"articleCard","isExchangeArticle","showReceiverArticle","deleteProposed",4,"ngFor","ngForOf"],[3,"articleCard","isExchangeArticle","showReceiverArticle","deleteProposed"],[3,"articleCard","showNumberProposals",4,"ngFor","ngForOf"],[3,"articleCard","showNumberProposals"],[1,"o-text-lg-semibold"],[3,"description","icon","typeButton"],[1,"o-layout-view-rating-cards"],[3,"viewRatingCard",4,"ngFor","ngForOf"],[3,"viewRatingCard"]],template:function(a,i){a&1&&(c(0,"div")(1,"div",0),u(2,"input",1),c(3,"label",2),g(4,"Publicaciones"),p(),c(5,"div",3)(6,"div",4)(7,"app-input",5),d("textChanged",function(b){return i.onTextSearchChanged(b)}),p(),c(8,"app-select",6),d("selectedOption",function(b){return i.onSelectedTypeArticle(b)}),p(),s(9,ie,2,0,"ng-template",7),c(10,"div",8),s(11,ce,3,3,"ng-template",7),p()()(),u(12,"input",9),c(13,"label",10),g(14,"Calificaciones"),p(),c(15,"div",3)(16,"div",4)(17,"app-select",11),d("selectedOption",function(b){return i.onSelectedRating(b)}),p(),c(18,"div",12)(19,"span",13),g(20),p(),s(21,se,2,0,"ng-template",7),s(22,de,1,3,"app-button",14),p(),s(23,_e,2,1,"ng-template",7),p()()()()),a&2&&(k(i.getLayout()),l(7),n("icon",i.Icon.Search)("placeholder","Nombre del art\xEDculo"),l(1),n("options",i.typeArticles)("label","Art\xEDculos:"),l(1),n("ngIf",i.service.isWorking()),l(2),n("ngIf",i.service.isCompleted()),l(6),n("label","Ordenar por:")("options",i.filterRatings),l(3),V("",i.serviceRating.ratings.length," resultados "),l(1),n("ngIf",i.service.isWorking()),l(1),n("ngIf",i.serviceRating.isCompleted()),l(1),n("ngIf",i.serviceRating.isCompleted()))},dependencies:[v,N,j,Q,z,w,Z,y,ee,Y],encapsulation:2});let e=t;return e})();export{pt as ProfilePageComponent};
